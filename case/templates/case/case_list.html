{% extends "case/base.html" %}
{% block title %}case系统{% endblock %}
{% block head %}
<link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="/static/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
<link href="/static/css/case_list.css" rel="stylesheet" media="screen">

{% endblock %}
{% block content %}
<div class="row-fluid">	
  	<div class="span12" style="float:left; margin-top:10px;border:thin solid #ddd;" id="searchbar">
      <div style="padding-top:10px;">
      <form action=" " id="searchform" method="post">
  		<ul class="selectList">
  			<li class="item-title">
  			<lable style="float:right">产品模块：</lable>
  		</li>
  		<li>
        <input  value="" type="hidden">
  			<select class="category_select_1" name="categoryid">
            </select>
            <select class="category_select_2">
            </select>
            <select class="category_select_3">
            </select>
           <li> 
        </ul>
        <ul class="testmodule">
  			<li class="item-title">
  				<lable style="float:right">所属模块：</lable>
  			</li>
  			<li>
  				<select class="category_select_1" name="testmodule">
            <option value=""> </option>
  					<option>一级</option>
  				  <option>二级</option>
  				  <option>三级</option>
          </select>
        </li>
            <li class="filter">
  			<lable>优先级：</lable></li>
  			<li>
  			<select class="category_select_1" name="priority">
          <option select="selected" value=""></option>
          <option value=""> </option>
  				<option value="1">一级</option>
  				<option value="2">二级</option>
  				<option value="3">三级</option>
            </select>
        </li>
        </ul>
        <ul class="priority">
  			<li class="item-title">
  			<lable style="float:right">状态：</lable>
  		</li>
  			<select class="category_select_1">
          <option select="selected" value=""></option>
          <option value=""> </option>
  				<option>一级</option>
  				<option>二级</option>
  				<option>三级</option>
            </select>
            <li class="filter"><lable>+</lable></li>
            <li>
  			<select class="category_select_1">
          <option select="selected" value=""></option>
          <option value=""> </option>
  				<option>一级</option>
  				<option>二级</option>
  				<option>三级</option>
            </select>
            <li>
        </ul>
        
        <ul class="">
  			<li class="item-title">
  			<lable style="float:right">作者：</lable>
  		</li>
  		<li>
  			<select class="category_select_1" name="author">
          <option select="selected" value=""></option>
          <option value=""> </option>
  				<option value="李稳">李稳</option>
  				<option>二级</option>
  				<option>三级</option>
            </select>
        </li>
 
  			<li class="filter"><lable>执行人：</lable></li>
  		
  			<li><select class="category_select_1" name="executor">
          <option select="selected" value=""></option>
          <option value=""> </option>
  				<option>一级</option>
  				<option>二级</option>
  				<option>三级</option>
            </select>
        </li>
        </ul>
        <ul>              
            <li class="item-title">
  			    <lable style="float:right">执行时间：</lable>
  		    </li>
                    <li>
                        <span class="input-append date form_datetime">
                          <input type="text" class=" input-medium" value="{{start_date|date:"Y-m-d"|default:""}}" readonly="" style="background-color: #FFFFFF" name="start_date">
                          <span class="add-on"><i class="icon-calendar"></i></span>
                        </span>&nbsp;&nbsp;至&nbsp; 
                        <span class="input-append date form_datetime">
                          <input type="text" class=" input-medium" value="{{end_date|date:"Y-m-d"|default:""}}" readonly="" style="background-color: #FFFFFF" name="end_date">
                          <span class="add-on"><i class="icon-calendar"></i></span>
                        </span>
                    </li>
                    <li style="padding-left:30px">
                    	<input type="text" class="input-medium search-query" name="keyword" placeholder="请输入搜索关键字">
                    	<button type="submit" class="btn">Search</button>
                    </li>
        </ul>
      </form>
    </div>
  	</div>
  	<!-- <div  id="searchicon" style="margin-top:10px;">
  		<img src="/static/img/praise.png" style="margin-left:500px">
  	</div>  -->
<div class="span12">
  	<div id="tbop"><span id="cnum">共2015条用例(后端同学注意！！写模版的时候在第一个模块这写啊 后面的模块class有不全 太多了懒得都粘一遍了)</span><buton id="newcase" class="btn btn-success">新建用例</button></div>
    <table id="caselist" class="table table-bordered">
    	<thead>
	      	<tr>
	    		<th style="width:50px;"><input id="caseall" type="checkbox">编号</th>
	    		<th style="width:100px;">前置条件</th>
	    		<th style="width:180px;">输入/动作</th>
	    		<th style="width:180px;">期望输出</th>
	    		<th style="width:40px;">级别</th>
	    		<th style="width:60px;">结果</th>
	    		<th style="width:40px;">BUG</th>
	    		<th style="width:80px;">执行日期</th>
	    		<th style="width:50px;">执行人</th>
	    		<th>备注</th>
	    		<th style="width:80px;">操作</th>
	    	</tr>
        </thead>
        <tbody>
	    	<tr class="cmodule" rank="1" value="10001">
	    		<td colspan="11">
	    			<div>
	    				<table >
	    					<tbody>
	    						{% for key,dic in case.items %}
	    						<tr class="success">
						    		<td colspan="1"><input class="modulecheck" type="checkbox"></td>
						    		<td colspan="9" class="editable">{{key}}</td>
						    		<td >
						      			<a class="icon-plus-sign" title="添加模块"></a>
						      		    <a class="icon-plus" title="添加用例"></a>
						      		    <a class="icon-trash"></a>
						    		</td>
	    						</tr>
	    						{% for c in dic %}
	    						<tr class="mtr" rank="1" value="201">
						    		<td><input class="casecheck" type="checkbox">1</td>
						      		<td class="editable nodrag">{{c.precondition}}</td>
						      		<td class="editable nodrag">{{c.action}}</td>
						    		<td class="editable nodrag">{{c.output}}</td>
						      		<td class="level nodrag">{{c.priority}}</td>
						      		{% for r in result %}
						      		{% if c.id == r.testcase_id %}
						      		<td class="nodrag"><a class="icon-play-circle"></a>{{r.result}}</td>
						    		<td class="editable nodrag">{{r.wi}}</td>
						      		<td>{{r.exec_date|date:"Y-m-d"}}</td>
						      		<td>{{r.executor}}</td>
						      		<td class="editable nodrag">{{r.r_remark}}</td>
						      		{% elif c.id  not in listid and forloop.counter == 1 %}	
						      		<td class="nodrag"><a class="icon-play-circle"></a></td>
						    		<td class="editable nodrag"></td>
						      		<td></td>
						      		<td></td>
						      		<td class="editable nodrag"></td>

						      		{% endif %}
						      		{% endfor %}
						      		<td class="nodrag">
						      			<a class="icon-plus" title="添加用例"></a>
						      			<a class="icon-download-alt" title="引入用例"></a>
						      			<a class="icon-eye-open" title="查看结果"></a>
						      			<a class="icon-trash"></a>
						      		</td> 
	    						</tr>
	    						{% endfor %}
	    						{% endfor %}
	    					</tbody>
	    				</table>
	    			</div>
	    		</td>
	    	</tr>
	    	<tr class="cmodule" rank="2" value="10002">
	    		<td colspan="11">
	    			<div>
	    				<table >
	    					<tbody>
	    						<tr class="success">
						    		<td colspan="1"><input class="modulecheck" type="checkbox"></td>
						    		<td colspan="9" class="editable">模块二</td>
						    		<td >
						      			<a class="icon-plus-sign"></a>
						      		    <a class="icon-plus"></a>
						      		    <a class="icon-trash"></a>
						    		</td>
	    						</tr>
	    						<tr class="mtr" rank="1" value="202">
						    		<td><input class="casecheck" type="checkbox">1</td>
						      		<td class="editable">总管理员操作</td>
						      		<td class="editable">点击后台导航购买授权</td>
						    		<td class="editable">跳转到购买授权页面，见设计图【购买授权】</td>
						      		<td>2</td>
						      		<td>PASS</td>
						    		<td class="editable">-</td>
						      		<td>2015/01/01</td>
						      		<td>易璐璐</td>
						      		<td class="editable">-</td>
						      		<td>
						      			<a class="icon-plus"></a>
						      			<a class="icon-download-alt"></a>
						      			<a class="icon-eye-open"></a>
						      			<a class="icon-trash"></a>
						      		</td> 
	    						</tr>
	    						<tr class="mtr" rank="2" value="203">
						    		<td><input class="casecheck" type="checkbox">1</td>
						      		<td class="editable">总管理员操作</td>
						      		<td class="editable">点击后台导航购买授权</td>
						    		<td class="editable">跳转到购买授权页面，见设计图【购买授权】</td>
						      		<td>2</td>
						      		<td>PASS</td>
						    		<td class="editable">-</td>
						      		<td>2015/01/01</td>
						      		<td>易璐璐</td>
						      		<td class="editable">-</td>
						      		<td>
						      			<a class="icon-plus"></a>
						      			<a class="icon-download-alt"></a>
						      			<a class="icon-eye-open"></a>
						      			<a class="icon-trash"></a>
						      		</td> 
	    						</tr>
	    						<tr class="mtr" rank="3" value="204">
						    		<td><input class="casecheck" type="checkbox">1</td>
						      		<td class="editable">总管理员操作</td>
						      		<td class="editable">点击后台导航购买授权</td>
						    		<td class="editable">跳转到购买授权页面，见设计图【购买授权】</td>
						      		<td>2</td>
						      		<td>PASS</td>
						    		<td class="editable">-</td>
						      		<td>2015/01/01</td>
						      		<td>易璐璐</td>
						      		<td class="editable">-</td>
						      		<td>
						      			<a class="icon-plus"></a>
						      			<a class="icon-download-alt"></a>
						      			<a class="icon-eye-open"></a>
						      			<a class="icon-trash"></a>
						      		</td> 
	    						</tr>
	    					</tbody>
	    				</table>
	    			</div>
	    		</td>
	    	</tr>
	    	<tr class="cmodule" rank="3" value="10003">
	    		<td colspan="11">
	    			<div>
	    				<table >
	    					<tbody>
	    						<tr class="success">
						    		<td colspan="1"><input class="modulecheck" type="checkbox"></td>
						    		<td colspan="9" class="editable">模块三</td>
						    		<td >
						      			<a class="icon-plus-sign"></a>	
						      		    <a class="icon-plus"></a>					      		    
						      		    <a class="icon-trash"></a>
						    		</td>
	    						</tr>
	    						<tr class="mtr" rank="1" value="205">
						    		<td><input class="casecheck" type="checkbox">1</td>
						      		<td class="editable">总管理员操作</td>
						      		<td class="editable">点击后台导航购买授权</td>
						    		<td class="editable">跳转到购买授权页面，见设计图【购买授权】</td>
						      		<td>2</td>
						      		<td>PASS</td>
						    		<td class="editable">-</td>
						      		<td>2015/01/01</td>
						      		<td>易璐璐</td>
						      		<td class="editable">-</td>
						      		<td>
						      			<a class="icon-plus"></a>
						      			<a class="icon-download-alt"></a>
						      			<a class="icon-eye-open"></a>
						      			<a class="icon-trash"></a>
						      		</td> 
	    						</tr>

	    					</tbody>
	    				</table>
	    			</div>
	    		</td>
	    	</tr>


        </tbody>
    </table>
    <div class="fixbar">
    	<button class="btn btn-success savebtn">保存</button>
    </div>
  	</div>
  </div>


{% endblock %}
{% block js %}
    <script type='text/javascript' src="/static/jquery/jquery.dragsort-0.5.2.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/static/js/bootstrap-datetimepicker.min.js"></script>
    <script type='text/javascript' src="/static/js/caselist.js?v=20150318"></script>   
{% endblock %}